# Check if we're in the middle of a merge
if [ -f .git/MERGE_HEAD ]; then
  echo "ðŸ”„ Merge in progress detected - skipping pre-commit hooks to avoid stashing issues"
  echo "ðŸ’¡ Please run 'pnpm lint:fix' manually after completing the merge"
  exit 0
fi

# Check if node_modules exists
if [ ! -d "node_modules" ]; then
  echo "ðŸ“¦ Dependencies may be missing. Running pnpm install..."
  pnpm install
fi

# Run lint-staged with better error handling
npx lint-staged
